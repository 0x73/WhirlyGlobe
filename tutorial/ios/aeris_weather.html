<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Aeris Weather Layer</title>
  <meta name="description" content="A high performance map and globe toolkit for iOS and Android.
">

  <!-- Bootstrap -->
  <link href="/WhirlyGlobe/css/bootstrap.min.css" rel="stylesheet">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <link rel="stylesheet" href="/WhirlyGlobe/css/main.css">
  <link rel="canonical" href="http://mousebird.github.io//WhirlyGlobe/tutorial/ios/aeris_weather.html">

  <!-- Fontwork -->
  <link rel="stylesheet" type="text/css" href="/WhirlyGlobe/css/MyFontsWebfontsKit.css">
  <link href='http://fonts.googleapis.com/css?family=Roboto:300' rel='stylesheet' type='text/css'>

  <!-- Fav Icon -->
  <link rel="shortcut icon" href="/WhirlyGlobe/images/fav-icon.ico" />

  <!--
  /**
   * @license
   * MyFonts Webfont Build ID 2914949, 2014-11-03T22:17:38-0500
   *
   * The fonts listed in this notice are subject to the End User License
   * Agreement(s) entered into by the website owner. All other parties are
   * explicitly restricted from using the Licensed Webfonts(s).
   *
   * You may obtain a valid license at the URLs below.
   *
   * Webfont: Museo-700 by exljbris
   * URL: http://www.myfonts.com/fonts/exljbris/museo/700/
   *
   * Webfont: Museo-300 by exljbris
   * URL: http://www.myfonts.com/fonts/exljbris/museo/300/
   *
   * Webfont: Museo-500 by exljbris
   * URL: http://www.myfonts.com/fonts/exljbris/museo/500/
   *
   *
   * License: http://www.myfonts.com/viewlicense?type=web&buildid=2914949
   * Licensed pageviews: 10,000
   * Webfonts copyright: Copyright (c) 2008 by Jos Buivenga/exljbris. All rights reserved.
   *
   * © 2014 MyFonts Inc
  */
  -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56793306-1', 'auto');
  ga('send', 'pageview');

</script>

</head>

  <body>
    <div id="wrap">
      <header>

  <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/WhirlyGlobe/"><img src="/WhirlyGlobe/images/WhirlyGlobe-Maply-33.png" width="239" height="33" alt="WhirlyGlobe-Maply"></a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="/WhirlyGlobe/">Home</a></li>
          <li><a href="/WhirlyGlobe/tutorial/">Tutorial</a></li>
          <li><a href="/WhirlyGlobe/reference/reference.html">Reference</a></li>
          <li><a href="/WhirlyGlobe/apps/apps.html">Apps</a></li>
          <li><a href="/WhirlyGlobe/builds/builds.html">Builds</a></li>
        </ul>
      </div>
    </div>
  </div>

</header>


      <div class="container">
        <div class="row">
          <div class="col-sm-9 tutorial tutorial-main">

            <h2>Aeris Weather Layer</h2>
            <p><em>Tutorial by Ranen Ghosh</em></p>

<p><a href="http://www.aerisweather.com/">Aeris Weather</a> is a provider of weather content like local forecasts and time dependent radar overlays.  In this tutorial we add an animated layer of up to date weather imagery from Aeris to WhirlyGlobe-Maply.</p>

<div class="well">
<h4><span class="label label-warning" style="margin-right:10px">Note</span>Version 2.4.1 (or better) Required</h4>

<p>
You will need WhirlyGlobe-Maply version 2.4.1 or better to use the new MaplyAeris classes.
</p>

<p>
Version 2.4.1 (or greater) can be found in the github repo or in this <a href="https://dl.dropboxusercontent.com/u/29069465/WhirlyGlobeMaplyComponent.framework_2_4_1_beta8.zip">binary distribution</a>.
</p>
</div>

<p>You will need to have already run through the <a href="remote_image_layer.html">remote image layer</a> tutorial.  Let’s get started by opening your HelloEarth project.</p>

<p><img src="/WhirlyGlobe/images/tutorial/aeris_weather_1.png" alt="Xcode HelloEarth" /></p>

<p>If you haven’t got one here is a suitable ViewController file to start with (for <a href="/WhirlyGlobe/tutorial/ios/code/ViewController_aeris_weather.m">Objective-C</a> or <a href="/WhirlyGlobe/tutorial/ios/code/ViewController_aeris_weather.swift">Swift</a>).  This version is from the previous tutorial for a <a href="remote_image_layer.html">remote image layer</a>.</p>

<h2 id="setup-the-aeris-layer">Setup the Aeris layer</h2>

<p>Let’s get started by adding five member variables to the ViewController class.  Add them to the implementation block in Objective C, or to the class properties in Swift.  We’ll explain what these do later.</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0"> 
<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">@implementation</span> <span class="nc">ViewController</span>
<span class="p">{</span>
    <span class="n">MaplyBaseViewController</span> <span class="o">*</span><span class="n">theViewC</span><span class="p">;</span>
    <span class="n">WhirlyGlobeViewController</span> <span class="o">*</span><span class="n">globeViewC</span><span class="p">;</span>
    <span class="n">MaplyViewController</span> <span class="o">*</span><span class="n">mapViewC</span><span class="p">;</span>

    <span class="c1">// New member variables
</span>    <span class="kt">int</span> <span class="n">frameCount</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">animationPeriod</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">importanceScale</span><span class="p">;</span>
    <span class="n">NSString</span> <span class="o">*</span><span class="n">aerisID</span><span class="p">;</span>
    <span class="n">NSString</span> <span class="o">*</span><span class="n">aerisKey</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>


</li><li data-index="1">


<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">private</span> <span class="k">var</span> <span class="nv">theViewC</span><span class="p">:</span> <span class="kt">MaplyBaseViewController</span><span class="p">?</span>
<span class="kd">private</span> <span class="k">var</span> <span class="nv">globeViewC</span><span class="p">:</span> <span class="kt">WhirlyGlobeViewController</span><span class="p">?</span>
<span class="kd">private</span> <span class="k">var</span> <span class="nv">mapViewC</span><span class="p">:</span> <span class="kt">MaplyViewController</span><span class="p">?</span>
    
<span class="c1">// New member variables</span>
<span class="kd">private</span> <span class="k">var</span> <span class="nv">frameCount</span><span class="p">:</span> <span class="kt">Int</span><span class="p">?</span>
<span class="kd">private</span> <span class="k">var</span> <span class="nv">animationPeriod</span><span class="p">:</span> <span class="kt">Float</span><span class="p">?</span>
<span class="kd">private</span> <span class="k">var</span> <span class="nv">importanceScale</span><span class="p">:</span> <span class="kt">Float</span><span class="p">?</span>
<span class="kd">private</span> <span class="k">var</span> <span class="nv">aerisID</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
<span class="kd">private</span> <span class="k">var</span> <span class="nv">aerisKey</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span></code></pre></figure>
 </li></ul>

<p>Add a method call as the final line in viewDidLoad.</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0"> 
<figure class="highlight"><pre><code class="language-objc" data-lang="objc">    <span class="p">[</span><span class="n">self</span> <span class="nf">setupAerisOverlayLayer</span><span class="p">];</span></code></pre></figure>


</li><li data-index="1">


<figure class="highlight"><pre><code class="language-swift" data-lang="swift">    <span class="nf">setupAerisOverlayLayer</span><span class="p">()</span></code></pre></figure>
 </li></ul>

<p>And begin implementing it as follows:</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0"> 
<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">setupAerisOverlayLayer</span> <span class="p">{</span>
    <span class="n">aerisID</span> <span class="o">=</span> <span class="s">@"2kDDnD7Q1XFfFm4CwH17C"</span><span class="p">;</span>
    <span class="n">aerisKey</span> <span class="o">=</span> <span class="s">@"FQmadjUccN3CnB4KG6kKeurUpxHSKM0xbCd6TlVi"</span><span class="p">;</span>
    <span class="n">frameCount</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
    <span class="n">animationPeriod</span> <span class="o">=</span> <span class="mi">3</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
    <span class="n">importanceScale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="o">/</span><span class="mi">16</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>


</li><li data-index="1">


<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="nf">setupAerisOverlayLayer</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">aerisID</span> <span class="o">=</span> <span class="s">"2kDDnD7Q1XFfFm4CwH17C"</span>
    <span class="n">aerisKey</span> <span class="o">=</span> <span class="s">"FQmadjUccN3CnB4KG6kKeurUpxHSKM0xbCd6TlVi"</span>
    <span class="n">frameCount</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">animationPeriod</span> <span class="o">=</span> <span class="mf">3.0</span>
    <span class="n">importanceScale</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="mf">16.0</span>
<span class="p">}</span></code></pre></figure>
 </li></ul>

<p>Aeris provides quite a few time slices in their data layers, more than we can easily display.  The <em>frameCount</em> member controls how many we will show.  The <em>animationPeriod</em> is how long we’ll take to run through the whole animation and the <em>importanceScale</em> controls how much data we’ll load relative to the underlying map.</p>

<h2 id="whirlyglobe-maply-aeris-classes">WhirlyGlobe-Maply Aeris classes</h2>

<p>There are three WhirlyGlobe-Maply Aeris-related classes needed to make animated Aeris weather happen.  <strong>MaplyAerisTiles</strong> provides a list of available Aeris layers.  The <strong>MaplyAerisLayerInfo</strong> class contains the relevant information for a particular layer.  And <strong>MaplyAerisTileSet</strong> provides the tile sources to add to a WhirlyGlobe-Maply layer.</p>

<p>Go back to the beginning of the implementation block in Objective C (or the beginning of the class in Swift), and add four more member variables here.  We’ll need these to keep track of the Aeris layers.</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0"> 
<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="n">MaplyQuadImageTilesLayer</span> <span class="o">*</span><span class="n">aerisLayer</span><span class="p">;</span>
<span class="n">MaplyAerisLayerInfo</span> <span class="o">*</span><span class="n">layerInfo</span><span class="p">;</span>
<span class="n">MaplyAerisTileSet</span> <span class="o">*</span><span class="n">layerTileSet</span><span class="p">;</span>
<span class="n">NSTimer</span> <span class="o">*</span><span class="n">aerisRefreshTimer</span><span class="p">;</span></code></pre></figure>


</li><li data-index="1">


<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">private</span> <span class="k">var</span> <span class="nv">aerisLayer</span><span class="p">:</span> <span class="kt">MaplyQuadImageTilesLayer</span><span class="o">!</span>
<span class="kd">private</span> <span class="k">var</span> <span class="nv">layerInfo</span><span class="p">:</span> <span class="kt">MaplyAerisLayerInfo</span><span class="o">!</span>
<span class="kd">private</span> <span class="k">var</span> <span class="nv">layerTileSet</span><span class="p">:</span> <span class="kt">MaplyAerisTileSet</span><span class="o">!</span>
<span class="kd">private</span> <span class="k">var</span> <span class="nv">aerisRefreshTimer</span><span class="p">:</span> <span class="kt">NSTimer</span><span class="o">!</span></code></pre></figure>
 </li></ul>

<p>Now add this to the <em>setupAerisOverlayLayer</em> method:</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0"> 
<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="n">NSString</span> <span class="o">*</span><span class="n">layerCode</span> <span class="o">=</span> <span class="s">@"radar"</span><span class="p">;</span>
<span class="n">MaplyAerisTiles</span> <span class="o">*</span><span class="n">aerisTiles</span> <span class="o">=</span> <span class="p">[[</span><span class="n">MaplyAerisTiles</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithAerisID</span><span class="p">:</span><span class="n">aerisID</span> <span class="nf">secretKey</span><span class="p">:</span><span class="n">aerisKey</span><span class="p">];</span>
<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">layerInfoDict</span> <span class="o">=</span> <span class="p">[</span><span class="n">aerisTiles</span> <span class="nf">layerInfo</span><span class="p">];</span>
<span class="n">layerInfo</span> <span class="o">=</span> <span class="n">layerInfoDict</span><span class="p">[</span><span class="nf">layerCode</span><span class="p">];</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">layerInfo</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"Error finding aeris radar layer parameters."</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">layerTileSet</span> <span class="o">=</span> <span class="p">[[</span><span class="n">MaplyAerisTileSet</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithAerisID</span><span class="p">:</span><span class="n">aerisID</span> <span class="nf">secretKey</span><span class="p">:</span><span class="n">aerisKey</span> <span class="n">layerInfo</span><span class="o">:</span><span class="n">layerInfo</span> <span class="n">tileSetCount</span><span class="o">:</span><span class="n">frameCount</span><span class="p">];</span>

<span class="p">[</span><span class="n">self</span> <span class="nf">refreshAerisOverlayLayer</span><span class="p">];</span></code></pre></figure>


</li><li data-index="1">


<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">layerCode</span> <span class="o">=</span> <span class="s">"radar"</span>
<span class="k">let</span> <span class="nv">aerisTiles</span> <span class="o">=</span> <span class="kt">MaplyAerisTiles</span><span class="p">(</span><span class="nv">aerisID</span><span class="p">:</span> <span class="n">aerisID</span><span class="o">!</span><span class="p">,</span> <span class="nv">secretKey</span><span class="p">:</span> <span class="n">aerisKey</span><span class="o">!</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">layerInfoDict</span> <span class="o">=</span> <span class="n">aerisTiles</span><span class="p">?</span><span class="o">.</span><span class="nf">layerInfo</span><span class="p">()</span>
<span class="n">layerInfo</span> <span class="o">=</span> <span class="n">layerInfoDict</span><span class="p">?[</span><span class="n">layerCode</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">MaplyAerisLayerInfo</span>

<span class="k">guard</span> <span class="k">let</span> <span class="nv">layerInfo</span> <span class="o">=</span> <span class="n">layerInfo</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Error finding aeris radar layer parameters."</span><span class="p">)</span>
    <span class="k">return</span>
<span class="p">}</span>

<span class="n">layerTileSet</span> <span class="o">=</span> <span class="kt">MaplyAerisTileSet</span><span class="p">(</span>
        <span class="nv">aerisID</span><span class="p">:</span> <span class="n">aerisID</span><span class="o">!</span><span class="p">,</span> 
        <span class="nv">secretKey</span><span class="p">:</span> <span class="n">aerisKey</span><span class="o">!</span><span class="p">,</span> 
        <span class="nv">layerInfo</span><span class="p">:</span> <span class="n">layerInfo</span><span class="p">,</span> 
        <span class="nv">tileSetCount</span><span class="p">:</span> <span class="kt">UInt32</span><span class="p">(</span><span class="n">frameCount</span><span class="o">!</span><span class="p">))</span>

<span class="nf">refreshAerisOverlayLayer</span><span class="p">()</span></code></pre></figure>
 </li></ul>

<p>That gets the <strong>MaplyAerisLayerInfo</strong> object for the radar layer, and constructs a <strong>MaplyAerisTileSet</strong> object for it.  That tells us where to get the actual data from, but we’ll need to do one more thing to find out how many time steps are available and where they are.</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0"> 
<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">refreshAerisOverlayLayer</span> <span class="p">{</span>    
    <span class="p">[</span><span class="n">layerTileSet</span> <span class="nf">startFetchWithSuccess</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="n">tileSources</span><span class="p">)</span> <span class="p">{</span>
        
        <span class="n">MaplyMultiplexTileSource</span> <span class="o">*</span><span class="n">multiSource</span> <span class="o">=</span> <span class="p">[[</span><span class="n">MaplyMultiplexTileSource</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithSources</span><span class="p">:</span><span class="n">tileSources</span><span class="p">];</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="n">aerisLayer</span><span class="p">)</span>
            <span class="p">[</span><span class="n">theViewC</span> <span class="nf">removeLayer</span><span class="p">:</span><span class="n">aerisLayer</span><span class="p">];</span>
        
        <span class="n">aerisLayer</span> <span class="o">=</span> <span class="p">[[</span><span class="n">MaplyQuadImageTilesLayer</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithCoordSystem</span><span class="p">:</span><span class="n">multiSource</span><span class="p">.</span><span class="n">coordSys</span> <span class="nf">tileSource</span><span class="p">:</span><span class="n">multiSource</span><span class="p">];</span>
        <span class="n">aerisLayer</span><span class="p">.</span><span class="n">imageDepth</span> <span class="o">=</span> <span class="n">frameCount</span><span class="p">;</span>
        <span class="n">aerisLayer</span><span class="p">.</span><span class="n">animationPeriod</span> <span class="o">=</span> <span class="n">animationPeriod</span><span class="p">;</span>
        <span class="n">aerisLayer</span><span class="p">.</span><span class="n">imageFormat</span> <span class="o">=</span> <span class="n">MaplyImageUShort5551</span><span class="p">;</span>
        <span class="n">aerisLayer</span><span class="p">.</span><span class="n">drawPriority</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
        <span class="n">aerisLayer</span><span class="p">.</span><span class="n">maxTiles</span> <span class="o">=</span> <span class="n">kMaplyImageLayerDrawPriorityDefault</span><span class="o">+</span><span class="mi">100</span><span class="p">;</span>
        <span class="n">aerisLayer</span><span class="p">.</span><span class="n">importanceScale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="o">/</span><span class="mi">16</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
        
        <span class="p">[</span><span class="n">theViewC</span> <span class="nf">addLayer</span><span class="p">:</span><span class="n">aerisLayer</span><span class="p">];</span>
        
    <span class="p">}</span> <span class="nf">failure</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}];</span>
<span class="p">}</span></code></pre></figure>


</li><li data-index="1">


<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="nf">refreshAerisOverlayLayer</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">layerTileSet</span><span class="o">!.</span><span class="nf">startFetchWithSuccess</span><span class="p">({</span> <span class="n">tileSources</span> <span class="k">in</span>

        <span class="k">let</span> <span class="nv">multiSource</span> <span class="o">=</span> <span class="kt">MaplyMultiplexTileSource</span><span class="p">(</span><span class="nv">sources</span><span class="p">:</span> <span class="n">tileSources</span><span class="o">!</span><span class="p">)</span>

        <span class="k">if</span> <span class="k">let</span> <span class="nv">aerisLayer</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">aerisLayer</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">theViewC</span><span class="o">!.</span><span class="nf">removeLayer</span><span class="p">(</span><span class="n">aerisLayer</span><span class="p">)</span>
        <span class="p">}</span>
        
        <span class="k">self</span><span class="o">.</span><span class="n">aerisLayer</span> <span class="o">=</span> <span class="kt">MaplyQuadImageTilesLayer</span><span class="p">(</span><span class="nv">coordSystem</span><span class="p">:</span> <span class="n">multiSource</span><span class="o">!.</span><span class="n">coordSys</span><span class="p">,</span> <span class="nv">tileSource</span><span class="p">:</span> <span class="n">multiSource</span><span class="o">!</span><span class="p">)</span>

        <span class="k">if</span> <span class="k">let</span> <span class="nv">aerisLayer</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">aerisLayer</span> <span class="p">{</span>
            <span class="n">aerisLayer</span><span class="o">.</span><span class="n">imageDepth</span> <span class="o">=</span> <span class="kt">UInt32</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">frameCount</span><span class="o">!</span><span class="p">)</span>
            <span class="n">aerisLayer</span><span class="o">.</span><span class="n">animationPeriod</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">animationPeriod</span><span class="o">!</span>
            <span class="n">aerisLayer</span><span class="o">.</span><span class="n">imageFormat</span> <span class="o">=</span> <span class="kt">MaplyQuadImageFormat</span><span class="o">.</span><span class="kt">ImageUShort5551</span>
            <span class="n">aerisLayer</span><span class="o">.</span><span class="n">drawPriority</span> <span class="o">=</span> <span class="n">kMaplyImageLayerDrawPriorityDefault</span><span class="o">+</span><span class="mi">100</span>
            <span class="n">aerisLayer</span><span class="o">.</span><span class="n">maxTiles</span> <span class="o">=</span> <span class="mi">1000</span>
            <span class="n">aerisLayer</span><span class="o">.</span><span class="n">importanceScale</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="mf">16.0</span>

            <span class="k">self</span><span class="o">.</span><span class="n">theViewC</span><span class="o">!.</span><span class="nf">addLayer</span><span class="p">(</span><span class="n">aerisLayer</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nv">failure</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="kt">NSError</span><span class="p">)</span> <span class="k">in</span>
    <span class="p">})</span>
<span class="p">}</span></code></pre></figure>
 </li></ul>

<p>This <em>refreshAerisOverlayLayer</em> method will query the Aeris service to figure out the end points for the timesteps in the data layer, radar in this case.  When it gets that information back it will put together a <strong>MaplyMultiplexTileSource</strong> which is just a tile source that deals with animated data sets.  From there it sets up a layer to fetch and draw the data and off it goes.</p>

<p><img src="/WhirlyGlobe/images/tutorial/aeris_weather_2.png" alt="Aeris Radar layer" /></p>

<h2 id="staying-current-with-a-periodic-refresh">Staying current with a periodic refresh</h2>

<p>You’ll notice that in the <em>refreshAerisOverlayLayer</em> method we first remove the aerisLayer from the view if it already exists.  This anticipates our final change, which is to periodically refresh the imagery to get the latest data.</p>

<p>At the end of the <em>setupAerisOverlayLayer</em> method, schedule a timer to refresh the imagery.</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0"> 
<figure class="highlight"><pre><code class="language-objc" data-lang="objc">    <span class="n">aerisRefreshTimer</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSTimer</span> <span class="nf">scheduledTimerWithTimeInterval</span><span class="p">:</span><span class="mi">300</span><span class="p">.</span><span class="mi">0</span> <span class="nf">target</span><span class="p">:</span><span class="n">self</span> <span class="n">selector</span><span class="o">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">refreshAerisOverlayLayer</span><span class="p">)</span> <span class="n">userInfo</span><span class="o">:</span><span class="nb">nil</span> <span class="n">repeats</span><span class="o">:</span><span class="nb">YES</span><span class="p">];</span></code></pre></figure>


</li><li data-index="1">


<figure class="highlight"><pre><code class="language-swift" data-lang="swift">    <span class="k">self</span><span class="o">.</span><span class="n">aerisRefreshTimer</span> <span class="o">=</span> <span class="kt">NSTimer</span><span class="o">.</span><span class="nf">scheduledTimerWithTimeInterval</span><span class="p">(</span><span class="mf">300.0</span><span class="p">,</span> <span class="nv">target</span><span class="p">:</span><span class="k">self</span><span class="p">,</span> <span class="nv">selector</span><span class="p">:</span><span class="kd">#selector(</span><span class="nf">self.refreshAerisOverlayLayer</span><span class="kd">)</span><span class="p">,</span> <span class="nv">userInfo</span><span class="p">:</span><span class="kc">nil</span><span class="p">,</span> <span class="nv">repeats</span><span class="p">:</span><span class="kc">true</span><span class="p">)</span></code></pre></figure>
 </li></ul>

<h3 id="more-data-layers">More Data Layers</h3>

<p>The other layers available from the WhirlyGlobe-Maply Aeris classes are Infrared Satellite, Global Satellite, and Hi-Res Visible Satellite.  For a Global Satellite example, substitute the following assignments in setupAerisOverlayLayer:</p>

<div class="multiple_code_header"><a href="#" data-index="0">&nbsp;</a><a href="#" data-index="1">&nbsp;</a></div>
<ul class="multiple_code"><li data-index="0"> 
<figure class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="c1">//    NSString *layerCode = @"radar";
//    frameCount = 6;
//    animationPeriod = 3.0;
//    importanceScale = 1.0/16.0;
</span>    <span class="n">NSString</span> <span class="o">*</span><span class="n">layerCode</span> <span class="o">=</span> <span class="s">@"sat-global"</span><span class="p">;</span>
    <span class="n">frameCount</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">animationPeriod</span> <span class="o">=</span> <span class="mi">5</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
    <span class="n">importanceScale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="o">/</span><span class="mi">4</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span></code></pre></figure>


</li><li data-index="1">


<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">//    let layerCode = "radar"</span>
<span class="c1">//    frameCount = 6</span>
<span class="c1">//    animationPeriod = 3.0</span>
<span class="c1">//    importanceScale = 1.0/16.0</span>
    <span class="k">let</span> <span class="nv">layerCode</span> <span class="o">=</span> <span class="s">"sat-global"</span>
    <span class="n">frameCount</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">animationPeriod</span> <span class="o">=</span> <span class="mf">5.0</span>
    <span class="n">importanceScale</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="mf">4.0</span></code></pre></figure>
 </li></ul>

<p><img src="/WhirlyGlobe/images/tutorial/aeris_weather_3.png" alt="Aeris Radar layer" /></p>



          </div>

          <div class="col-sm-3 tutorial tutorial-sidebar">
            <div data-spy="affix" data-offset-bottom="124">
              <div class="sidebar-module">
                <nav>
                  <div class="trigger">
                    <ol class="list-unstyled sidebar-headers">
                      
                      <li class="sidebar-header-item">Getting Started</li>
                      <ol class="list-unstyled sidebar-list-items">
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/getting_started.html">Before You Start</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/hello_earth.html">Hello Earth Project</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/building_from_source.html">Source Distribution</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/building_from_binary.html">Binary Distribution</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/building_from_cocoapod.html">Cocoapods</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      </ol>
                      
                      <li class="sidebar-header-item">Basics of Display</li>
                      <ol class="list-unstyled sidebar-list-items">
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/globe_or_map.html">Globe Or Map</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/your_first_globe.html">Your First Globe</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/your_first_map.html">Your First Map</a></li>
                      
                      
                      
                      
                      </ol>
                      
                      <li class="sidebar-header-item">Image Based Maps</li>
                      <ol class="list-unstyled sidebar-list-items">
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/local_image_layer.html">Local Image Layer</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/remote_image_layer.html">Remote Image Layer</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/remote_NASA_image_layers.html">NASA Image Layers</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      </ol>
                      
                      <li class="sidebar-header-item">Overlays</li>
                      <ol class="list-unstyled sidebar-list-items">
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/adding_vector_data.html">Vector Data</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/screen_markers.html">Screen Markers</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/screen_labels.html">Screen Labels</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      </ol>
                      
                      <li class="sidebar-header-item">Shapes</li>
                      <ol class="list-unstyled sidebar-list-items">
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/spheres.html">Spheres</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      </ol>
                      
                      <li class="sidebar-header-item">Interaction</li>
                      <ol class="list-unstyled sidebar-list-items">
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/vector_selection.html">Vector Selection</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/screen_marker_selection.html">Screen Marker Selection</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/location_tracking.html">Location Tracking</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      </ol>
                      
                      <li class="sidebar-header-item">Advanced</li>
                      <ol class="list-unstyled sidebar-list-items">
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/cartodb_layer.html">CartoDB Layer</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item current"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/aeris_weather.html">Aeris Weather Layer</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/component_tester.html">Component Tester</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/micello_map.html">Micello Indoor Maps</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      <li class="sidebar-list-item"><a class="page-link" href="/WhirlyGlobe/tutorial/ios/digitalglobe_mapsapi.html">DigitalGlobe Maps API</a></li>
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      
                      </ol>
                      
                    </ol>
                  </div>
                </nav>

              </div>
            </div>
          </div>

        </div>

        <div class="row">
          <div class="col-sm-9" id="prev-next">
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            

            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            
            
            

            
            

            <!-- what follows is kinda horrifying -->
            <!-- is the current page the first page of the first tutorial section? -->
            

            <!-- is the current page the last page of the last tutorial section? -->
            

            <!-- is the current page the first in a tutorial section? -->
            

            <!-- is the current page the last in a tutorial section containing multiple pages? -->
            

            <!-- is the current page neither the first or last in a tutorial section -->
            

            
            
            

            <!-- deliver next/prev links -->
            <a class="prev" href="/WhirlyGlobe/tutorial/ios/cartodb_layer.html">Previous</a><a class="next" href="/WhirlyGlobe/tutorial/ios/component_tester.html">Next</a>


            
            
            
            

            
            
            
            
            

            
            
            
            
            

            
            
            
            
            

          </div>
        </div>

      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/WhirlyGlobe/js/bootstrap.min.js"></script>

<footer class="site-footer">

  <div class="container">
  	<div class="row">
  		<div class="col-sm-12">
  			<!-- Begin MailChimp Signup Form -->
			<link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
			<style type="text/css">
				#mc_embed_signup{clear:left; font:14px Helvetica,Arial,sans-serif; width:100%; color: #fff; padding: 10px 0 50px;} 
				#mc_embed_signup #mce-EMAIL{font-family: "Helvetica Neue",Arial,sans-serif; font-size: 16px; border: 3px solid #9A8578; padding: 1.1em 0.75em; letter-spacing: .025em; color: #464646;}
				#mc_embed_signup #mce-EMAIL:focus{border-color: #3E85B0; outline: none;}
				#mc_embed_signup #mc-embedded-subscribe{background-color: #3E85B0; box-sizing: border-box; height: 41px; letter-spacing: .05em; border: none; outline: none;}
				#mc_embed_signup #mc-embedded-subscribe:hover{background-color: #62A5CE;}
				#mc_embed_signup #mc-embedded-subscribe:focus{border: none; outline: none;}
				/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
				   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
			</style>
			<div id="mc_embed_signup">
			<form action="//mousebirdconsulting.us7.list-manage.com/subscribe/post?u=d65dfc9f1c48c04b763fdc2a5&amp;id=a916633a1d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
			    <div id="mc_embed_signup_scroll">
				<label for="mce-EMAIL">Join our mailing list</label>
				<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
			    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
			    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_d65dfc9f1c48c04b763fdc2a5_a916633a1d" tabindex="-1" value=""></div>
			    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
			    </div>
			</form>
			</div>

			<!--End mc_embed_signup-->
  		</div>	
  	</div>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-sm-12">

        <div class="col-sm-2">
          <ul class="contact-list">
            <li><a href="/WhirlyGlobe/">WhirlyGlobe-Maply</a></li>
            <li><a href="mailto:contact@mousebirdconsulting.com">contact@mousebirdconsulting.com</a></li>
          </ul>
        </div>

        <div class="col-sm-6 col-sm-offset-1">
          <p class="site-description">
            An open source geospatial display toolkit<br /> for iOS and Android.
          </p>
          <p class="site-description">
            <small>Ⓒ 2017 mousebird consulting.</small>
          </p>
        </div>

        <div class="col-sm-3 ">
          <ul class="social-media-list">
            
            <li>
              <a href="https://github.com/mousebird">
                <span class="username">mousebird</span>
                <span class="icon icon--github">
                  <svg viewBox="0 0 16 16">
                    <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                  </svg>
                </span>
              </a>
            </li>
            

            
            <li>
              <a href="https://twitter.com/mousebirdc">
                <span class="username">mousebirdc</span>
                <span class="icon icon--twitter">
                  <svg viewBox="0 0 16 16">
                    <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                    c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                  </svg>
                </span>
              </a>
            </li>
            
          </ul>

        </div>

      </div>
    </div>
  </div>
</footer>

    <script src="/WhirlyGlobe/js/tutorial.js"></script>
  </body>
</html>
